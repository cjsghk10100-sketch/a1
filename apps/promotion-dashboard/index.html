<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Promotion Dashboard MVP</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header>
    <h1>Promotion Dashboard MVP</h1>
    <p>임시파일 / 승격 대기 / 승인 / 반려 상태판 (로컬 저장)</p>
    <p><small>내보낸 파일은 <code>promoted/inbox/</code>에 넣고 적용 스크립트를 실행해줘.</small></p>
  </header>

  <section class="card">
    <h2>새 승격 제안 추가</h2>
    <form id="proposal-form" class="proposal-form">
      <input name="proposal_id" placeholder="proposal_id (예: PR-003)" required />
      <input name="target_path" placeholder="target_path" required />
      <input name="summary" placeholder="요약" required />
      <select name="risk_level">
        <option>L0</option><option selected>L1</option><option>L2</option><option>L3</option>
      </select>
      <input name="evidence" placeholder="승격 근거 (왜 시스템에 도움되는지)" required />
      <input name="success_rate" placeholder="성공률(%) 예:95" />
      <input name="drift" placeholder="드리프트(%) 예:-3" />
      <input name="repro" placeholder="재현성(0~1) 예:0.92" />
      <button type="submit">추가</button>
    </form>
  </section>

  <section class="grid">
    <div class="card">
      <h2>승격 대기 (PENDING_APPROVAL)</h2>
      <table id="pending-table">
        <thead><tr><th>ID</th><th>Target</th><th>Summary</th><th>근거</th><th>KPI</th><th>SLA</th><th>Risk</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="card">
      <h2>승인/반려 판정</h2>
      <div id="details">행을 선택하면 상세가 보여요.</div>
      <label>판정 사유(짧게)</label>
      <textarea id="decision-reason" rows="4" placeholder="승인/반려 이유"></textarea>
      <div class="decision-buttons">
        <button id="approve-btn">승인</button>
        <button id="reject-btn">반려</button>
        <button id="apply-btn">반영 완료</button>
        <button id="rollback-btn">롤백</button>
      </div>
      <h3>Rollback Logs</h3>
      <div id="rollback-logs" class="log-box">롤백 로그 없음</div>
    </div>
  </section>

  <section class="grid">
    <div class="card">
      <h2>승인됨 (APPROVED)</h2>
      <table id="approved-table">
        <thead><tr><th>ID</th><th>Summary</th><th>근거</th><th>KPI</th><th>사유</th><th>At</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="card">
      <h2>반려됨 (REJECTED)</h2>
      <table id="rejected-table">
        <thead><tr><th>ID</th><th>Summary</th><th>근거</th><th>KPI</th><th>사유</th><th>At</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <section class="card">
    <h2>반영 완료 (APPLIED)</h2>
    <table id="applied-table">
      <thead><tr><th>ID</th><th>Summary</th><th>근거</th><th>KPI</th><th>사유</th><th>At</th></tr></thead>
      <tbody></tbody>
    </table>
  </section>

  <section class="card">
    <h2>Temp Files (tmp/)</h2>
    <div class="filters">
      <button id="refresh-tmp">임시파일 새로고침</button>
      <button id="reset">데이터 리셋</button>
      <button id="export-md">Markdown 내보내기</button>
    </div>
    <table id="tmp-table">
      <thead>
        <tr><th>Path</th><th>Zone</th><th>Size</th><th>Modified</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <script src="./app.js"></script>
</body>
</html>
