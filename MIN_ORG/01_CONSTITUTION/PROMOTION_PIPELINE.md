# PROMOTION_PIPELINE

목적: 검증된 실행 방법만 자동화 레벨을 승격하고, 이상 징후 시 즉시 강등한다.

## 1) 자동화 레벨
- L0 수동: 사람 주도, 에이전트 보조
- L1 반자동: 제안/초안/부분 실행 자동
- L2 자동(제한): 가드레일 내 자동 실행
- L3 자동(확장): 반복 검증 완료, 상시 모니터링

## 2) 승격 조건
- 최근 N회 실행에서 성공률 임계치 충족
- 리스크 지표 임계치 이내
- 증거 완성도 100%
- 재현성 점수 기준 이상
- 필요한 승인 완료

## 3) 강등 조건
- 실패율 급증
- 리스크 임계치 초과
- 증거 누락/감사 불가
- 드리프트(성과 저하) 지속
- 정책 위반

## 4) 파이프라인 단계
1. Candidate 등록 (Lesson 기반)
2. Shadow run (저위험 병행 검증)
3. Pilot 승격 (소량 트래픽/예산)
4. Full 승격 (L2/L3)
5. 지속 모니터링
6. 이상 시 자동 강등

## 5) 운영 규칙
- 승격은 점프가 아니라 단계적 전환
- 강등은 즉시 적용, 원인 분석은 이후
- 승격/강등 결정은 append-only 로그에 기록
- 모든 변경은 롤백 경로를 포함


## 6) 승격 승인 SLA
- 기본 SLA: `PENDING_APPROVAL` 등록 후 24시간 이내 1차 판정(승인/반려/보류)
- SLA 초과 시: 능동 알림 규칙에 따라 사용자에게 에스컬레이션
- 48시간 초과 시: 자동 상태 `HELD` 전환 + 이유 기록

## 7) 승격/강등 KPI 임계값 표 (초안)
| 지표 | 승격 기준 | 강등 기준 |
|---|---:|---:|
| 실행 성공률 | 최근 20회 >= 95% | 최근 20회 < 85% |
| 증거 완성도 | 100% | < 95% |
| 재현성 점수 | >= 0.9 | < 0.75 |
| 드리프트(성과 저하) | 기준선 대비 -5% 이내 | 기준선 대비 -15% 초과 |
| 실패 재발률 | 동일 유형 2회 이하/주 | 동일 유형 3회 이상/주 |

- 임계값은 도메인별(트레이딩/콘텐츠/온체인)로 오버레이 가능
- 임계값 변경 시 변경 이유/효과/리스크를 함께 기록

## 8) 롤백 표준 템플릿
1. 트리거 확인(강등/중단 사유)
2. 마지막 안정 버전/스코프 식별
3. 권한/스코프 즉시 축소(자동→반자동/수동)
4. 관련 크론/자동화 잡 일시중지
5. 데이터/아티팩트 무결성 확인
6. incident 기록 + 재발방지 액션 등록
7. 재승격 조건 명시
