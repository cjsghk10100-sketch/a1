# Copy this file to ".env.desktop" for local desktop runs.
# Do not commit ".env.desktop".

# API runtime
DATABASE_URL=postgres://agentapp:agentapp@localhost:5432/agentapp
AUTH_REQUIRE_SESSION=1
AUTH_ALLOW_LEGACY_WORKSPACE_HEADER=0
AUTH_SESSION_SECRET=replace-with-a-long-random-string
# Optional setup token for /v1/auth/bootstrap-owner in strict deployments.
# AUTH_BOOTSTRAP_TOKEN=replace-with-a-random-setup-token
AUTH_BOOTSTRAP_ALLOW_LOOPBACK=1
# Optional dedicated secret for engine token hashing.
# ENGINE_TOKEN_SECRET=replace-with-another-long-random-string
AUTH_SESSION_ACCESS_TTL_SEC=3600
AUTH_SESSION_REFRESH_TTL_SEC=2592000

# Desktop runtime profile
DESKTOP_RUNNER_MODE=embedded
DESKTOP_API_PORT=3000
DESKTOP_WEB_PORT=5173
DESKTOP_API_START_TIMEOUT_MS=45000
DESKTOP_WEB_START_TIMEOUT_MS=45000
# Optional: forwarded to API AUTH_BOOTSTRAP_TOKEN and web VITE_AUTH_BOOTSTRAP_TOKEN.
# DESKTOP_BOOTSTRAP_TOKEN=replace-with-the-same-setup-token
# Optional owner passphrase seed for web bootstrap/login.
# DESKTOP_OWNER_PASSPHRASE=replace-with-a-long-random-passphrase
DESKTOP_RESTART_MAX_ATTEMPTS=5
DESKTOP_RESTART_BASE_DELAY_MS=1000
DESKTOP_RESTART_MAX_DELAY_MS=30000
DESKTOP_NO_WINDOW=0
DESKTOP_EXIT_AFTER_READY=0

# External engine mode (used when DESKTOP_RUNNER_MODE=external)
DESKTOP_ENGINE_WORKSPACE_ID=ws_dev
# Optional: restrict external engine claims to one room
DESKTOP_ENGINE_ROOM_ID=
DESKTOP_ENGINE_ACTOR_ID=desktop_engine
# Optional owner/session bearer for strict auth engine auto-registration.
# DESKTOP_ENGINE_BEARER_TOKEN=<owner_access_token>
DESKTOP_ENGINE_POLL_MS=1200
DESKTOP_ENGINE_MAX_CLAIMS_PER_CYCLE=1
